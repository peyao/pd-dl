(this["webpackJsonppd-dl"]=this["webpackJsonppd-dl"]||[]).push([[0],{13:function(e,t,c){},14:function(e,t,c){},17:function(e,t,c){},18:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(1),r=c.n(a),s=c(6),o=c.n(s),i=(c(12),c(13),c(2)),l=(c(14),c(3)),d=c.n(l),j=c(5),b=(c(16),"DocumentID"),u="Scale",h="ContentType";function O(e,t,c){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=n.contentType,r=void 0===a?"png":a;return"".concat(e).concat(c,"?").concat(b,"=").concat(t,"&").concat(h,"=").concat(r)}function x(e,t,c){return f.apply(this,arguments)}function f(){return(f=Object(j.a)(d.a.mark((function e(t,c,n){var a,r,s=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>3&&void 0!==s[3]?s[3]:{},t&&c||Promise.reject("Failed downloadPng : Missing params"),r=O(t,c,n,a),console.log("downloadPng url: ",r),e.abrupt("return",fetch(r,{method:"GET",mode:"cors"}).then((function(e){return e.blob()})).then((function(e){return console.log("blob: ",e),URL.createObjectURL(e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(j.a)(d.a.mark((function e(t,c){var n,a,r,s,o=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.length>2&&void 0!==o[2]?o[2]:0,n=o.length>3&&void 0!==o[3]?o[3]:1,a=o.length>4&&void 0!==o[4]?o[4]:{},t&&c||Promise.reject("Failed downloadPngRange : Missing params"),r=[],s=0;case 6:if(!(s<n)){e.next=13;break}return e.next=9,x(t,c,s,a);case 9:r[s]=e.sent;case 10:s++,e.next=6;break;case 13:return console.log("imageBlobs: ",r),e.abrupt("return",r[0]);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c(17);var m=/(.*)\/[0-9]+$/;var g=function(e){var t=e.url,c=e.onJobStartClick,r=Object(a.useState)(),s=Object(i.a)(r,2),o=s[0],l=s[1],d=Object(a.useState)(),j=Object(i.a)(d,2),h=j[0],x=j[1],f=Object(a.useState)("1"),p=Object(i.a)(f,2),g=p[0],v=p[1],S=Object(a.useState)("png"),N=Object(i.a)(S,2),w=N[0],y=(N[1],Object(a.useState)(!1)),k=Object(i.a)(y,2),C=k[0],L=k[1],P=Object(a.useState)(0),T=Object(i.a)(P,2),U=T[0],R=T[1],F=Object(a.useState)(1),D=Object(i.a)(F,2),J=D[0],E=D[1],I=Object(a.useState)(""),B=Object(i.a)(I,2),M=B[0],A=B[1];Object(a.useEffect)((function(){try{var e=new URL(t),c=new URLSearchParams(e.search),n=m.exec(e.pathname)[1];l("".concat(e.origin).concat(n,"/")),x(c.get(b)),c.has(u)&&v(c.get(u)),L(!1)}catch(a){if(!t)return;console.log("Couldn't extract details from URL: ",t),L(!0)}}),[t]),Object(a.useEffect)((function(){o&&A(O(o,h,J-1,{scale:g,contentType:w}))}),[o,J,h,w]);var G=Object(a.useCallback)((function(){c(o,h,U,J,{scale:g,contentType:w})}),[o,h,w,U,J]);return Object(n.jsxs)("div",{className:"control-card card",children:[Object(n.jsx)("header",{className:"card-header",children:Object(n.jsx)("div",{className:"card-header-title",children:"Job Info"})}),Object(n.jsxs)("div",{className:"card-content",children:[C&&Object(n.jsx)("div",{className:"notification is-danger",children:"Unable to extract info from URL"}),Object(n.jsx)("table",{className:"table",children:Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"DocumentId"}),Object(n.jsx)("td",{children:h})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"ContentType"}),Object(n.jsx)("td",{children:w})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"BaseUrl"}),Object(n.jsx)("td",{children:o})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"StartPage"}),Object(n.jsx)("td",{children:Object(n.jsx)("input",{className:"input is-small",type:"text",value:U,onChange:function(e){return R(e.target.value)}})})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"EndPage"}),Object(n.jsx)("td",{children:Object(n.jsx)("input",{className:"input is-small",type:"text",value:J,onChange:function(e){return E(e.target.value)}})})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"Final Page Test"}),Object(n.jsx)("td",{children:Object(n.jsx)("a",{href:M,target:"_blank",rel:"noreferrer noopener",children:M})})]})]})})]}),Object(n.jsx)("footer",{className:"card-footer",children:Object(n.jsx)("a",{href:"#",className:"card-footer-item",onClick:G,children:"Start Job"})})]})};var v=function(e){e.progress;var t=e.downloadLink;return Object(n.jsxs)("div",{className:"control-card card",children:[Object(n.jsx)("header",{className:"card-header",children:Object(n.jsx)("div",{className:"card-header-title",children:"Download Status"})}),Object(n.jsx)("div",{className:"card-content"}),Object(n.jsx)("footer",{className:"card-footer",children:Object(n.jsx)("a",{disabled:!t,href:t,className:"card-footer-item",children:"Download Zip"})})]})};var S=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),c=t[0],r=t[1],s=Object(a.useState)(!1),o=Object(i.a)(s,2),l=(o[0],o[1]),d=Object(a.useState)(!1),j=Object(i.a)(d,2),b=(j[0],j[1],Object(a.useState)("")),u=Object(i.a)(b,2),h=u[0],O=u[1],x=Object(a.useCallback)((function(e,t,c,n,a){l(!0),function(e,t){return p.apply(this,arguments)}(e,t,c,n,a).then((function(e){return O(e)})).finally((function(){return l(!1)}))}),[]);return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("header",{children:"pd-dl"}),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("textarea",{className:"textarea",placeholder:"URL",rows:"4",onChange:function(e){return r(e.target.value)}}),Object(n.jsx)(g,{url:c,onJobStartClick:x}),h&&Object(n.jsx)(v,{downloadLink:h})]})]})},N=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,19)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))};o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(S,{})}),document.getElementById("root")),N()}},[[18,1,2]]]);
//# sourceMappingURL=main.e63a0325.chunk.js.map